$(document).ready((function(){var e=$("#mobilemenu");if(e.length){if(e.isLeftSide=e.hasClass("leftside"),e.isOpen=e.hasClass("show"),e.isDowndrop=e.find(">.scroller").hasClass("downdrop"),$mobileMenuNlo=e.find("[data-nlo]"),$("#mobileheader .burger").click((function(){e.isOpen?o():i(),"object"==typeof jsControlMobile&&jsControlMobile&&"onFocusLost"in jsControlMobile&&jsControlMobile.onFocusLost()})),e.isLeftSide){e.parent().append('<div id="mobilemenu-overlay"></div>');var t=$("#mobilemenu-overlay");t.click((function(){e.isOpen&&(o(),e.find(".expanded").removeClass("expanded"))})),BX.loadScript(arAsproOptions.SITE_TEMPLATE_PATH+"/js/jquery.mobile.custom.touch.min.js",(function(){$(document).swiperight((function(e){if(!($(e.target).closest(".flexslider").length||$(e.target).closest(".swipeignore").length||$(e.target).closest(".mobile-scrolled").length||$(e.target).closest(".jqmWindow.popup").length)){var t=document.documentElement.clientWidth/3;e.swipestart.coords[0]<=t&&i()}})),$(document).swipeleft((function(e){$(e.target).closest(".flexslider").length||$(e.target).closest(".swipeignore").length||$(e.target).closest(".mobile-scrolled").length||$(e.target).closest(".jqmWindow.popup").length||o()}))}))}else $(document).on("click","#mobileheader",(function(t){$(t.target).closest("#mobilemenu").length||$(t.target).closest(".burger").length||!e.isOpen||o()}));function i(){if(CloseMobilePhone(),!e.isOpen){if($(".style-switcher").hasClass("active")&&$(".style-switcher .switch").trigger("click"),$(".style-switcher .switch").hide(),e.isLeftSide?setTimeout((function(){t.fadeIn("fast")}),100):($("body").scrollTop(0).css({position:"fixed"}),e.css({top:+($("#mobileheader").height()+$("#mobileheader").offset().top)+"px"}),$("#mobileheader .burger").addClass("c")),e.addClass("show"),e.isOpen=!0,!e.isDowndrop){var i=e.find(".wrap").first(),o=i.data("params");void 0===o&&(o={depth:0,scroll:{},height:{}}),i.data("params",o)}$mobileMenuNlo.length&&($mobileMenuNlo.hasClass("nlo-loadings")||($mobileMenuNlo.addClass("nlo-loadings"),setTimeout((function(){$.ajax({data:{nlo:$mobileMenuNlo.attr("data-nlo")},success:function(e){$mobileMenuNlo[0].insertAdjacentHTML("beforebegin",$.trim(e)),$mobileMenuNlo.remove()},error:function(){$mobileMenuNlo.removeClass("nlo-loadings")}})}),300)))}}function o(){e.isOpen&&(e.removeClass("show"),e.isOpen=!1,$(".style-switcher .switch").show(),e.isLeftSide?setTimeout((function(){t.fadeOut("fast")}),100):($("#mobileheader .burger").removeClass("c"),$("body").css({position:""})),e.isDowndrop||setTimeout((function(){var t=e.find(".scroller").first(),i=e.find(".wrap").first(),o=i.data("params");o.depth=0,i.data("params",o).attr("style",""),e.scrollTop(0),t.css("height","")}),400))}function s(){s.inited||(s.inited=!0,$(".mobile_regions .dropdown .loadings").length&&l(),BX.loadScript(arAsproOptions.SITE_TEMPLATE_PATH+"/js/jquery-ui.min.js",n))}function n(){$("#mobile-region-search").autocomplete({minLength:2,appendTo:$(".mobile_regions .dropdown .mobile-cities").closest(".menu-item-fixed"),source:function(e,t){let i=BX.message("bitrix_sessid"),o=BX.message("LANGUAGE_ID"),s=BX.message("SITE_ID"),n=location.pathname+location.search;BX.ajax({url:"/bitrix/services/main/ajax.php?mode=ajax&c="+encodeURIComponent("aspro:regionality.list.max")+"&action=searchCities&sessid="+i+"&SITE_ID="+s+"&siteId="+s+"&url="+encodeURIComponent(n)+"&term="+encodeURIComponent(e.term)+"&lang="+o,method:"POST",async:!0,processData:!0,scriptsRunFirst:!0,emulateOnload:!0,start:!0,cache:!1,dataType:"json",onsuccess:function(e){"object"==typeof e&&e&&"object"==typeof e.data&&e.data&&(Object.values(e.data.cities).length?t(e.data.cities):$(".mobile_regions .dropdown .mobile-cities").hide().siblings().empty().show())},onfailure:function(){}})},select:function(e,t){let i=t.item.ID;if(i){setCookieOnDomains("current_region",i);let e=t.item.LOCATION_ID;e?setCookieOnDomains("current_location",e):setCookieOnDomains("current_location","",{expires:-1})}return $("#mobile-region-search").val(t.item.label),!1},open:function(e,t){$(".mobile_regions .dropdown .mobile-cities").hide().siblings().show()},close:function(e,t){$(".mobile_regions .dropdown .mobile-cities").siblings().show()}}).data("ui-autocomplete")._renderItem=function(e,t){let i='\n          <li class="mobile-city">\n            <a href="'+t.URL+'" data-id="'+t.ID+'" data-locid="'+(t.LOCATION_ID?t.LOCATION_ID:"")+'" class="dark-color"><span>'+t.NAME+"</span>"+(t.PATH?'<div class="muted">'+t.PATH+"</div>":"")+"</a>\n          </li>\n        ";return $(i).appendTo(e)}}function l(){let e=BX.message("bitrix_sessid"),t=BX.message("LANGUAGE_ID"),i=BX.message("SITE_ID"),o=location.pathname+location.search,s=l.lastId,n=$(".mobile_regions .dropdown .loadings").closest("li");BX.ajax({url:"/bitrix/services/main/ajax.php?mode=ajax&c="+encodeURIComponent("aspro:regionality.list.max")+"&action=getMainCities&sessid="+e+"&SITE_ID="+i+"&siteId="+i+"&url="+encodeURIComponent(o)+"&lastId="+s+"&lang="+t,method:"POST",async:!0,processData:!0,scriptsRunFirst:!0,emulateOnload:!0,start:!0,cache:!1,dataType:"json",onsuccess:function(e){if("object"==typeof e&&e&&"object"==typeof e.data&&e.data&&(void 0!==e.data.lastId&&(l.lastId=e.data.lastId),e.data.cities&&Object.values(e.data.cities).length)){let t="";for(let i in e.data.cities){let o=e.data.cities[i];t+='\n\t\t\t\t\t\t\t\t\t<li class="mobile-city main-city'+(1==o.CURRENT?" selected":"")+'">\n\t\t\t\t\t\t\t\t\t\t<a href="'+o.URL+'" data-id="'+o.ID+'" data-locid="'+(o.LOCATION_ID?o.LOCATION_ID:"")+'" class="dark-color"><span>'+o.NAME+"</span>"+(o.PATH?'<div class="muted">'+o.PATH+"</div>":"")+"</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t"}$(t).insertBefore(n),e.data.more?l.observer.observe(n[0]):n.remove()}},onfailure:function(){n.remove()}})}$(document).on("click","#mobilemenu .menu a,#mobilemenu .social-icons a",(function(t){var i=$(this);if(i.hasClass("parent"))t.preventDefault(),e.isDowndrop?(i.closest("li").hasClass("expanded")?i.closest("li").removeClass("expanded"):i.closest("li").addClass("expanded"),s()):(i.closest("li").addClass("expanded"),function(){if(!e.isDowndrop){var t=e.find(".scroller").first(),i=e.find(".wrap").first();if(i.length){var o=i.data("params"),n=e.find(".expanded>.dropdown").eq(o.depth);if(n.length){var l=n.closest(".mobile_regions").length;if(l)var a=n.find(".menu-item-fixed");o.scroll[o.depth]=parseInt(e.scrollTop()),o.height[o.depth+1]=Math.max(n.height(),o.depth?e.find(".expanded>.dropdown").eq(o.depth-1).height():i.height()),t.css("height",o.height[o.depth+1]+"px"),++o.depth,i.css("transform","translateX("+-100*o.depth+"%)"),setTimeout((function(){e.animate({scrollTop:0},200)}),100),l&&a.css("height",e.height()-a.position().top+"px");var r=n.height();setTimeout((function(){r?t.css("height",r+"px"):t.css("height",""),l&&(setTimeout((function(){a.css("overflow","")}),200),s())}),200)}i.data("params",o)}}}());else{if(i.closest("li").hasClass("counters")){var n=i.attr("href");if(void 0!==n){if("javascript:void(0)"===n)return;window.location.href=n,window.location.reload()}}i.closest(".menu_back").length||o()}})),$(document).on("click","#mobilemenu .dropdown .menu_back",(function(t){t.preventDefault();var i=$(this);!function(){if(!e.isDowndrop){var t=e.find(".scroller").first(),i=e.find(".wrap").first();if(i.length){var o=i.data("params");if(o.depth>0){var s=e.find(".expanded>.dropdown").eq(o.depth-1);if(s.length){t.css("height",o.height[o.depth]+"px"),--o.depth,i.css("transform","translateX("+-100*o.depth+"%)"),setTimeout((function(){e.animate({scrollTop:o.scroll[o.depth]},200)}),100),s.closest(".mobile_regions").length&&(s.find(".menu-item-fixed").css("overflow","hidden"),setTimeout((function(){s.find(".menu-item-fixed").animate({scrollTop:0},200)}),100));var n=!!o.depth&&e.find(".expanded>.dropdown").eq(o.depth-1).height();setTimeout((function(){n?t.css("height",n+"px"):t.css("height","")}),200)}}i.data("params",o)}}}(),setTimeout((function(){i.closest(".expanded").removeClass("expanded")}),400)})),$(document).on("click","#mobilemenu .menu.mobile_regions .menu_autocomplete .clean_icon",(function(e){$(this).closest(".wrapper").find("input[type=text]").val("").trigger("change"),$(this).hide()})),$(document).on("keyup change paste","#mobilemenu .menu.mobile_regions .menu_autocomplete input[type=text]",(function(e){let t=$(this).closest(".wrapper").find(".clean_icon");$(this).val().length?t.show():(t.hide(),$(this).closest(".dropdown").find(".mobile-cities").show().siblings().hide().empty())})),$(document).on("click",".mobile_regions .mobile-city a",(function(e){e.preventDefault();let t=$(this),i=t.data("id");if(i){setCookieOnDomains("current_region",i);let e=t.data("locid");e?setCookieOnDomains("current_location",e):setCookieOnDomains("current_location","",{expires:-1});let o=t.attr("href");location.href=o}})),s.inited=!1,l.lastId=0,l.observer=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&(l.observer.unobserve(e.target),l())}))}),{root:null,rootMargin:"0px",threshold:.5})}var a=$("#mobileheader"),r=$("body.simple_basket_mode #header"),c=$("#mobilePhone");c.isOpen=!1,c.length&&(c.isOpen=c.hasClass("show"),$(document).on("click",".wrap_phones .svg-inline-phone",(function(e){SwipeMobilePhone(),e.stopPropagation()})),$(document).on("click",".wrap_phones .svg-inline-close",(function(e){CloseMobilePhone(),e.stopPropagation()}))),SwipeMobilePhone=function(){c.isOpen?CloseMobilePhone():OpenMobilePhone()},OpenMobilePhone=function(){if(!c.isOpen){o();var e=Boolean(r.length)?r[0].getBoundingClientRect():a[0].getBoundingClientRect(),t=e.top+e.height+pageYOffset;$('<div class="jqmOverlay mobp" style="top:'+t+'px;position:absolute"></div>').appendTo("body"),setTimeout((function(){c.slideDown("fast",(function(){c.addClass("show"),c.isOpen=!0}))}),100)}},CloseMobilePhone=function(){c.isOpen&&setTimeout((function(){c.slideUp("fast",(function(){c.removeClass("show"),c.isOpen=!1,$(".jqmOverlay.mobp").remove()}))}),100)},checkMobilePhone=function(){window.matchMedia("(max-width: 991px)").matches||CloseMobilePhone()},$(document).on("click","body.simple_basket_mode .back-mobile-arrow .arrow-back",(function(){document.referrer&&document.referrer!=location.href?window.history.back():location.href="/"}));var d=$("#mobilefilter");if(d.length){d.isOpen=e.hasClass("show"),d.isAppendLeft=!1,d.isWrapFilter=!1,d.isHorizontalOrCompact=$(".filter_horizontal").length||$(".bx_filter_vertical.compact").length,d.close='<i class="svg svg-close close-icons"></i>',$(document).on("click",".bx-filter-title",(function(){OpenMobileFilter()})),$(document).on("click","#mobilefilter .svg-close.close-icons",(function(){CloseMobileFilter()})),$(document).on("click",".bx_filter_select_block",(function(e){var t=$(e.target).parents(".bx_filter_select_container");if(t.length){var i=t.closest(".bx_filter_parameters_box").attr("data-property_id");$("#smartFilterDropDown"+i).length&&$("#smartFilterDropDown"+i).css({"max-width":t.width(),"z-index":"3020"})}})),$(document).on("mouseup",".bx_filter_section",(function(e){$(e.target).hasClass("bx_filter_search_button")&&CloseMobileFilter()})),$(document).on("mouseup",".bx_filter_parameters_box_title",(function(e){$("[id^='smartFilterDropDown']").hide(),$(e.target).hasClass("close-icons")&&CloseMobileFilter()})),d.parent().append('<div id="mobilefilter-overlay"></div>');var p=$("#mobilefilter-overlay");p.click((function(){d.isOpen&&CloseMobileFilter()})),mobileFilterNum=function(e,t){if(t)$(".bx_filter_search_button").text(e.data("f"));else{var i="",o=$(".bx_filter_parameters_box > span");i+=o.data("f")+" "+e+" "+declOfNumFilter(e,[o.data("fi"),o.data("fr"),o.data("frm")]),$(".bx_filter_search_button").text(i)}},declOfNumFilter=function(e,t){return cases=[2,0,1,1,1,2],t[e%100>4&&e%100<20?2:cases[e%10<5?e%10:5]]},OpenMobileFilter=function(){if(!d.isOpen){if($("body").addClass("jqm-initied wf"),$(".bx_filter_vertical .slide-block__head.filter_title").removeClass("closed"),$(".bx_filter_vertical .slide-block__head.filter_title + .slide-block__body").show(),!d.isAppendLeft){d.isWrapFilter||($(".bx_filter").wrap("<div id='wrapInlineFilter'></div>"),d.isWrapFilter=!0),$(".bx_filter").appendTo($("#mobilefilter"));var e=$("#filter-helper");e.length&&e.prependTo($("#mobilefilter .bx_filter_parameters")),d.isAppendLeft=!0}"function"==typeof checkFilterLandgings&&checkFilterLandgings(),$("#mobilefilter .bx_filter_parameters").addClass("scrollbar scrollblock"),$("#mobilefilter .slide-block .filter_title").addClass("ignore"),$("#mobilefilter .bx_filter_parameters .bx_filter_parameters_box_title").addClass("colored_theme_hover_bg-block"),$(".bx_filter_button_box.ajax-btns").addClass("colored_theme_bg"),$(".bx_filter_button_box.ajax-btns .filter-bnt-wrapper").removeClass("hidden"),InitCustomScrollBar(),setTimeout((function(){p.fadeIn("fast")}),100),$("body").css({overflow:"hidden",height:"100vh"}),d.addClass("show"),d.find(".bx_filter").css({display:"block"}),d.isOpen=!0,$("#mobilefilter .bx_filter_button_box.btns.ajax-btns").removeClass("hidden"),void 0===d.data("init")&&(d.scroll((function(){$(".bx_filter_section .bx_filter_select_container").each((function(){var e=$(this).closest(".bx_filter_parameters_box").attr("data-property_id");$("#smartFilterDropDown"+e).length&&$("#smartFilterDropDown"+e).hide()}))})),d.data("init","Y"))}},CloseMobileFilter=function(e){if(d.find(".bx_filter_parameters").removeClass("scrollbar"),$("#mobilefilter .bx_filter_parameters").length&&$("body").removeClass("jqm-initied wf"),$("#mobilefilter .bx_filter_parameters .bx_filter_parameters_box_title").removeClass("colored_theme_hover_bg-block"),$(".slide-block .filter_title").removeClass("ignore"),$(".bx_filter_button_box.ajax-btns").removeClass("colored_theme_bg"),$(".bx_filter:not(.n-ajax) .bx_filter_button_box.ajax-btns .filter-bnt-wrapper").addClass("hidden"),d.isOpen&&(d.find(".bx_filter_parameters").scrollTop(0),$("body").css({overflow:"",height:""}),setTimeout((function(){p.fadeOut("fast")}),100),d.removeClass("show"),d.isOpen=!1),e&&d.isAppendLeft){$(".bx_filter").appendTo($("#wrapInlineFilter")).show();var t=$("#filter-helper");t.length&&t.appendTo($("#filter-helper-wrapper")),d.isAppendLeft=!1,d.removeData("init"),mobileFilterNum($("#modef_num_mobile"),!0)}},checkMobileFilter=function(){(!window.matchMedia("(max-width: 991px)").matches&&!d.isHorizontalOrCompact||!window.matchMedia("(max-width: 767px)").matches&&d.isHorizontalOrCompact)&&CloseMobileFilter(!0)}}else checkTopFilter(),$(document).on("click",".bx-filter-title",(function(){$(this).toggleClass("opened"),$(".visible_mobile_filter").length?($(".visible_mobile_filter").show(),$(".bx_filter_vertical, .bx_filter").slideToggle(333)):($(".bx_filter_vertical").closest("div[id^=bx_incl]").show(),$(".bx_filter_vertical, .bx_filter").slideToggle(333))}))}));